name: Testing
on: push

jobs: 
  test_project:
    runs-on: ubuntu-latest

    services:
      image: postgres
       env:
       - POSTGRES_USER: postgres
       - POSTGRES_PASSWORD: postgres
       - POSTGRES_BD: postgres
       ports:
       - 5432/tcp
       options: --health-cmd pg_isready --health-interval 10s --health-timeout 5s --health-retries 5
       
    steps:
    - uses: actions/checkout@v2
    - name: Run Django unit tests
      run:
        pip3 install --user django
        python3 manage.py test
